{% extends "base.html" %}
{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="container py-4" dir="rtl">
  <div class="card shadow-sm border-0 rounded-4 p-4">

    <div class="row g-4">
      <!-- תמונה -->
      <div class="col-md-6">
        <div class="bg-light rounded-3 d-flex align-items-center justify-content-center" style="aspect-ratio:4/3;">
          <img src="{{ product.image_url }}" alt="{{ product.name }}" class="img-fluid rounded">
        </div>
      </div>

      <!-- פרטים כלליים -->
      <div class="col-md-6 d-flex flex-column">
        <h2 class="fw-bold mb-3">
          {{ product.name }}
          {% if product.is_hot %}<span class="badge bg-danger ms-2">🔥 חם</span>{% endif %}
        </h2>

        <h4 class="text-success fw-bold mb-3">₪{{ '%.2f'|format(product.price) }}</h4>

        <!-- כפתורים -->
        <div class="d-flex gap-2 mb-4">
          <a href="#" class="btn btn-success">הוסף לסל 🛒</a>
          {% if product.gender == 'men' %}
            <a href="{{ url_for('men_page') }}" class="btn btn-outline-secondary">חזור לגברים</a>
          {% elif product.gender == 'women' %}
            <a href="{{ url_for('women_page') }}" class="btn btn-outline-secondary">חזור לנשים</a>
          {% elif product.gender == 'kids' %}
            <a href="{{ url_for('kids_page') }}" class="btn btn-outline-secondary">חזור לילדים</a>
          {% else %}
            <a href="{{ url_for('home') }}" class="btn btn-outline-secondary">חזרה לדף הבית</a>
          {% endif %}
        </div>

        <!-- טאבים -->
        <ul class="nav nav-tabs" id="productTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab">פרטים</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="sizes-tab" data-bs-toggle="tab" data-bs-target="#sizes" type="button" role="tab">מידות</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">חוות דעת</button>
          </li>
        </ul>

        <div class="tab-content p-3 border border-top-0 rounded-bottom" id="productTabsContent">
          <!-- פרטים -->
          <div class="tab-pane fade show active" id="details" role="tabpanel">
            {% if product.description %}
              <p class="text-muted" style="white-space: pre-line;">{{ product.description }}</p>
            {% else %}
              <p class="text-muted">אין תיאור למוצר זה.</p>
            {% endif %}
            <p>
              <span class="badge bg-light text-dark">קטגוריה: {{ categories[product.category] }}</span>
              <span class="badge bg-light text-dark">קהל יעד: {{ genders[product.gender] }}</span>
            </p>
          </div>

          <!-- מידות -->
          <div class="tab-pane fade" id="sizes" role="tabpanel">
            {% if product.size_clothes %}
              <p><strong>מידת בגדים:</strong> {{ product.size_clothes }}</p>
            {% elif product.size_shoes %}
              <p><strong>טווח נעליים:</strong> {{ product.size_shoes }}</p>
            {% else %}
              <p class="text-muted">אין מידע על מידות.</p>
            {% endif %}
          </div>

          <!-- חוות דעת -->
          <div class="tab-pane fade" id="reviews" role="tabpanel">
            <p class="text-muted">עדיין אין חוות דעת למוצר זה.</p>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}
