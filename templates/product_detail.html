{% extends "base.html" %}
{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="container py-4" dir="rtl">
  <style>
    .pd-card {
      border: 1px solid #eee;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 16px rgba(0,0,0,.05);
    }
    .pd-img-wrap {
      aspect-ratio: 4 / 3;
      background: #f8f9fa;
      display: grid; place-items: center;
    }
    .pd-img-wrap img { width: 100%; height: 100%; object-fit: cover; }
    .pd-price { font-size: 1.4rem; font-weight: 800; }
    .chip {
      display: inline-block;
      background: #f1f3f5;
      border-radius: 999px;
      padding: .25rem .7rem;
      font-size: .9rem;
    }
  </style>

  <nav class="mb-3">
    <a href="{{ url_for('home') }}" class="btn btn-sm btn-outline-secondary">祝 转</a>
    {% if product.category and categories.get(product.category) %}
      <a href="{{ url_for('category_page', slug=product.category) }}" class="btn btn-sm btn-outline-secondary">
        拽专: {{ categories[product.category] }}
      </a>
    {% endif %}
  </nav>

  <div class="pd-card p-3 p-md-4">
    <div class="row g-3 align-items-stretch">
      <div class="col-12 col-md-6">
        <div class="pd-img-wrap">
          <img src="{{ product.image_url }}" alt="{{ product.name }}">
        </div>
      </div>
      <div class="col-12 col-md-6 d-flex">
        <div class="w-100 d-flex flex-column">
          <div class="d-flex align-items-center gap-2 mb-2">
            <h2 class="mb-0">{{ product.name }}</h2>
            {% if product.is_hot %}<span class="badge bg-danger"> </span>{% endif %}
          </div>

          <div class="pd-price mb-3">{{ '%.2f'|format(product.price) }}</div>

          {% if product.description %}
          <p class="text-secondary mb-3" style="white-space: pre-line;">{{ product.description }}</p>
          {% endif %}

          <div class="d-flex flex-wrap gap-2 mb-3">
            {% if product.size_clothes %}<span class="chip">转 : {{ product.size_clothes }}</span>{% endif %}
            {% if product.size_shoes %}<span class="chip">转 注: {{ product.size_shoes }}</span>{% endif %}
            {% if product.category and categories.get(product.category) %}
              <span class="chip">拽专: {{ categories[product.category] }}</span>
            {% endif %}
          </div>

          <div class="mt-auto d-flex gap-2">
            <a href="#" class="btn btn-primary">住祝 住</a>
            <a href="javascript:history.back()" class="btn btn-outline-secondary">专</a>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}
